# docker-compose.yml
version: '3.8'

services:
  app:
    # 1. Usa o Dockerfile customizado para instalar a extensão SQLite
    build:
      context: .
      dockerfile: ./Dockerfile 
      
    volumes:
      # Monta todo o seu projeto
      - .:/workspaces/laravel:cached
      # O volume abaixo é redundante, mas não causa erro. O primeiro já engloba a pasta database.

    # 2. NÃO HÁ depends_on: - db

    environment:
      # Conexão correta para SQLite
      DB_CONNECTION: sqlite
      DB_HOST: 
      DB_PORT: 
      DB_DATABASE: /workspaces/laravel/database/database.sqlite
      DB_USERNAME: 
      DB_PASSWORD:

# 3. O serviço 'db' e o volume 'db-data' foram removidos